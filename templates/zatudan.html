<!DOCTYPE html>
<html lang="jp">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='zatudan.css') }}"> <!--ファイル名の挿入-->
    <!--8行目のcssファイル名を遼成お願い-->
    <title>AI Respondent</title>
</head>

<style>
    container {
    text-align: center; /* 中央寄せ */
    padding: 0%;
    margin: 0 auto; /* 中央寄せ */
    width:50%;
}

/* タイトル（h2要素）のスタイル */
.custom-heading {
    color: #000000; /* 色を赤に設定 */
    background-color: #D9D9D9; /* 背景色を灰色に設定 */
    text-align: center; /* 中央揃えに設定 */
    padding: 0px; /* 必要に応じて余白を追加 */
    width:50%;
}

/* フォーム要素（select, textarea）のスタイル */
.form-select,
.form-textarea {
    display: block; /* ブロック要素に変更 */
    width: 50%; /* 必要に応じて幅を設定 */
    padding: 10px; /* 必要に応じて余白を追加 */
    color:#000000;
    background-color:#D9D9D9;
}

#submit_button {
    background-color:#43C660; /* ボタンの背景色を青色に設定 */
    color:#000000; /* ボタンのテキスト色を白色に設定 */
    /* その他のスタイルを追加できます（例: パディング、ボーダー、角丸など） */
    padding: 10px 20px;
    border: none;
    border-radius: 5px;
    /* カーソルをポインターに変更する */
    cursor: pointer;
    display: block; /* ボタンをブロック要素に変更 */
    margin: 0 auto; /* 中央寄せ */
    text-align: center; /* テキストを中央揃え */
}

/* 全ての要素の角を丸くする */
.container,
.custom-heading,
.form-select,
.form-textarea {
    border-radius: 5px; /* 丸みの強さを指定 */
}

</style>

<body> 
    {% include 'header.html' %}

    <div style="height: 50px;"></div>


    <form id="content-question" method="post">
        
    <div class="container">
        <h2 class="custom-heading">学部選択</h2> <!--色、背景を変更-->
        <select name="faculty" class="form-select" > <!--中央寄せ-->
            <option value="情報工学部情報工学科">
                情報工学部情報工学科
            </option>
            <option value="都市情報学部都市情報学科">
                都市情報学部都市情報学科
            </option>

        </select>
        
        <h2 class="custom-heading">雑談を書く</h2> <!--色、背景を変更-->
        <textarea name="question_sentence" cols="50" rows="3" placeholder="例: おはようございます"
            required></textarea>
    </div>
        <div>
            <button type="submit" id="submit_button">雑談を投稿</button>
        </div>
    </form>
    <div id="answer_text"></div>

    <script>
        // elementを取得
        const button = document.getElementById("submit_button");
        const answerText = document.getElementById("answer_text");
        const form = document.getElementById("content-question");

// バックエンドに対して回答データをリクエスト
form.addEventListener("submit", event => {
    // ページを移動する処理を抑制
    event.preventDefault();

    // ★formから選択された人物とテキストを取得
    const faculty = form.faculty.value;
    const question_sentence = form.question_sentence.value;

    // ★回答フォームに文字列を書き込み
    answerText.innerHTML = `${faculty}からのチャット：「${question_sentence}」`;

    // ★質問時の情報をJSONに変換する。
    const postData = {
        "faculty": faculty,
        "question_sentence": question_sentence
    };

// バックエンドに対して回答データをリクエスト
fetch("/zatudan", {
    method: "POST",
    headers: {
        "Content-Type": "application/json; charset=utf-8",
    },
    body: JSON.stringify(postData)
})
    .then(response => {
        // 回答データをjson形式で取得
        return response.json();
    })
    .then(data => {
        // テキストボックスに回答データを反映
        answerText.innerHTML = data.answer;
    })
    .finally(() => {
        console.log("request complete!");
    });
});

    </script>
{% include 'footer.html' %}

</body>

</html>