<!DOCTYPE html>
<html lang="jp">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é›‘è«‡ç”»é¢</title>
    <!--<link rel="stylesheet" href="{{ url_for('static', filename='question_dblog.css') }}" >-->
    <style>/*ã€Œé›‘è«‡ã™ã‚‹ã€ã«é–¢ã—ã¦ã¯ã“ã“ã‚’ç·¨é›†*/
        table:nth-of-type(1) {
            background-color: #C1EFB9; /* èƒŒæ™¯è‰²ã‚’æŒ‡å®š */
        }

        table:nth-of-type(2) {
            background-color: #F2D5F3; /* åˆ¥ã®èƒŒæ™¯è‰²ã‚’æŒ‡å®š */
        }

        table:nth-of-type(3) {
            background-color: #B9E8EE; /* åˆ¥ã®èƒŒæ™¯è‰²ã‚’æŒ‡å®š */
        }

        table:nth-of-type(4) {
            background-color: #C1EFB9; /* åˆ¥ã®èƒŒæ™¯è‰²ã‚’æŒ‡å®š */
        }

        table:nth-of-type(5) {
            background-color: #F2D5F3; /* åˆ¥ã®èƒŒæ™¯è‰²ã‚’æŒ‡å®š */
        }

        table:nth-of-type(6) {
            background-color: #B9E8EE; /* åˆ¥ã®èƒŒæ™¯è‰²ã‚’æŒ‡å®š */
        }

        table:nth-of-type(7) {
            background-color: #C1EFB9; /* åˆ¥ã®èƒŒæ™¯è‰²ã‚’æŒ‡å®š */
        }

        table:nth-of-type(8) {
            background-color: #F2D5F3; /* åˆ¥ã®èƒŒæ™¯è‰²ã‚’æŒ‡å®š */
        }

        table:nth-of-type(9) {
            background-color: #B9E8EE; /* åˆ¥ã®èƒŒæ™¯è‰²ã‚’æŒ‡å®š */
        }

        table:nth-of-type(10) {
            background-color: #C1EFB9; /* åˆ¥ã®èƒŒæ™¯è‰²ã‚’æŒ‡å®š */
        }


        /* ãƒ†ãƒ¼ãƒ–ãƒ«å†…ã®ç‰¹å®šã®ã‚»ãƒ«ã«èƒŒæ™¯è‰²ã‚’é©ç”¨ */
        table td {
            padding: 5px; /* ã‚»ãƒ«ã®ä½™ç™½ã‚’è¨­å®š */
        }

            h2{
        color:#000000;
        background-color:#D9D9D9;
        text-align:center;
        margin: 30px auto ;
        display: block;
        width:35%;
    }

            .form-select{
        color:rgba(17, 18, 17, 0.525);
        background-color:#D9D9D9;
        font-weight:900;
        width:35%;
        display: block;
        margin: 0 auto ;
        text-align:center; 
    }
            #select_button {
                position:fixed;
                top:18%;
                right: 22%; /* ç”»é¢ã®å³ç«¯ã‹ã‚‰ã®ä½ç½® */
                color:#000000;
                background-color:#B6B6B0;
                border-radius: 10px; 
                padding: 8px 16px; 
                border: none; 
                outline: none; 
                margin: 10px auto;
                }

            /* çµµæ–‡å­—ãƒœã‚¿ãƒ³ã®è¦ªè¦ç´ ã« Flexbox ã‚’é©ç”¨ã—ã¦å‡ç­‰ã«é…ç½®ã™ã‚‹ */
            table tr:last-child {
                justify-content: space-between; /* è¦ç´ é–“ã®é–“éš”ã‚’å‡ç­‰ã« */
            }

            /* å„çµµæ–‡å­—ãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« */
            button[id^="like-button"] {
                border: none; /* æ ã‚’å‰Šé™¤ */
                background: none; /* èƒŒæ™¯ã‚’é€æ˜ã« */
                cursor: pointer; /* ã‚«ãƒ¼ã‚½ãƒ«ã‚’ãƒã‚¤ãƒ³ã‚¿ãƒ¼ã«è¨­å®š */
                padding: 0; /* ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã‚’ã‚¼ãƒ­ã«è¨­å®š */
                font-size: 20px; /* ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã‚’ç¶™æ‰¿ */
                flex: 1; /* å¹…ã‚’å‡ç­‰ã«ã™ã‚‹ */
                text-align: center; /* ãƒœã‚¿ãƒ³å†…ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’ä¸­å¤®æƒãˆ */
            }

                .db-footer {
            position: fixed;
            bottom: 7%;
            right: 22%; /* ç”»é¢ã®å³ç«¯ã‹ã‚‰ã®ä½ç½® */
            background-color: #43C660;
            color: #000000;
            border-radius: 10px; 
            padding: 8px 16px; 
            border: none; 
            outline: none; 
            margin: 10px auto;

        }

        table{
            margin: 0 auto;
            width:35%;
            margin-top: 20px; /* ä¸Šãƒãƒ¼ã‚¸ãƒ³ã‚’è¿½åŠ  */
            display: block;
            table-layout: fixed; /* ãƒ†ãƒ¼ãƒ–ãƒ«ã®æ¨ªå¹…ã‚’å‡ç­‰ã«è¨­å®š */
            border-collapse: separate; /* ã‚»ãƒ«ã®å¢ƒç•Œç·šã‚’åˆ¥ã€…ã«è¡¨ç¤º */
            border-radius: 15px; /* è§’ã‚’ä¸¸ãã™ã‚‹åŠå¾„ã‚’è¨­å®š */
            overflow: hidden; /* è§’ã‚’ä¸¸ãã™ã‚‹ãŸã‚ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ•ãƒ­ãƒ¼åˆ¶å¾¡ */
        }
        td, th {
            border: none; /* ã‚»ãƒ«ã®å¢ƒç•Œç·šã‚’å‰Šé™¤ */
            word-wrap: break-word; /* ãƒ†ã‚­ã‚¹ãƒˆã‚’é©åˆ‡ã«æŠ˜ã‚Šè¿”ã™ */
            padding: 8px; /* ã‚»ãƒ«å†…ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¨ã‚»ãƒ«ã®å¢ƒç•Œã¨ã®é–“ã«8pxã®ä½™ç™½ã‚’è¿½åŠ  */
        }

    </style>
</head>

<body>

    {% include 'header.html' %}

    <div style="height: 50px;"></div>


    <form id="select-content" method="post">

        <h2>å­¦éƒ¨é¸æŠ</h2> 
        <select name="faculty_r" class="form-select"> 
            <option value="æƒ…å ±å·¥å­¦éƒ¨æƒ…å ±å·¥å­¦ç§‘">
                æƒ…å ±å·¥å­¦éƒ¨æƒ…å ±å·¥å­¦ç§‘
            </option>
            <option value="éƒ½å¸‚æƒ…å ±å­¦éƒ¨éƒ½å¸‚æƒ…å ±å­¦ç§‘">
                éƒ½å¸‚æƒ…å ±å­¦éƒ¨éƒ½å¸‚æƒ…å ±å­¦ç§‘
            </option>
        </select>
        <div>
            <button type="submit" id="select_button">å­¦éƒ¨é¸æŠ</button>
        </div>

    </form>
    <div id="answer_text"></div>

    <script>
        const form = document.getElementById("select-content");

        // ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã«å¯¾ã—ã¦å›ç­”ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜
        form.addEventListener("submit", event => {
            // ãƒšãƒ¼ã‚¸ã‚’ç§»å‹•ã™ã‚‹å‡¦ç†ã‚’æŠ‘åˆ¶
            event.preventDefault();

            // â˜…formã‹ã‚‰é¸æŠã•ã‚ŒãŸäººç‰©ã¨ãƒ†ã‚­ã‚¹ãƒˆã‚’å–å¾—
            const faculty_r = form.faculty_r.value;
            
            if (faculty_r == 'æƒ…å ±å·¥å­¦éƒ¨æƒ…å ±å·¥å­¦ç§‘') {
                window.location.href = "{{url_for('zatu_joho')}}"	
            } else if(faculty_r == 'éƒ½å¸‚æƒ…å ±å­¦éƒ¨éƒ½å¸‚æƒ…å ±å­¦ç§‘'){
                window.location.href = "{{url_for('zatu_toshi')}}"
            };
        })

    </script>

<div class="-wrapper">
        {% for zatudan_log_data in zatudan_log_data_list %}
        <!-- ãƒ†ãƒ¼ãƒ–ãƒ«å½¢å¼ã§å›ç­”ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤º -->
        <p>
            <table border="1">
                <tbody>
                    <tr>
                        <td nowrap id="selectedImage"><img src='{{ zatudan_log_data["icon"] }}' width="25px" alt="åŒ¿åM"></td>
                        <td colspan="2">{{ zatudan_log_data["date"] }}</td>
                        <td colspan="2">{{ zatudan_log_data["faculty"] }}</td><!--å­¦éƒ¨-->
                    </tr>
                    <tr>
                        <td nowrap>é›‘è«‡</td>
                        <td colspan="4">{{ zatudan_log_data["question"]|safe }}</td><!--é›‘è«‡-->
                    </tr>
                    <tr>
                        <td colspan="1" style="width: calc(100%/5);">
                            <button id="like-button1-{{ zatudan_log_data['id'] }}">
                                ğŸ˜†{{ zatudan_log_data['like1'] }}
                            </button>
                        </td><!--ãƒœã‚¿ãƒ³1-->
                        <td colspan="1" style="width: calc(100%/5);">
                            <button id="like-button2-{{ zatudan_log_data['id'] }}">
                                ğŸ˜{{ zatudan_log_data['like2'] }}
                            </button>
                        </td><!--ãƒœã‚¿ãƒ³2-->
                        <td colspan="1" style="width: calc(100%/5);">
                            <button id="like-button3-{{ zatudan_log_data['id'] }}">
                                ğŸ˜­{{ zatudan_log_data['like3'] }}
                            </button>
                        </td><!--ãƒœã‚¿ãƒ³3-->
                        <td colspan="1" style="width: calc(100%/5);">
                            <button id="like-button4-{{ zatudan_log_data['id'] }}">
                                ğŸ˜¯{{ zatudan_log_data['like4'] }}
                            </button>
                        </td><!--ãƒœã‚¿ãƒ³4-->
                        <footer class="an-footer">
                            <td colspan="1" style="width: calc(100%/5);">
                                <button style="float: right; margin-right: 10%;"><a href="{{ url_for('answerpage') }}">è¿”ä¿¡</a></button></td><!--è¿”ä¿¡ãƒœã‚¿ãƒ³-->
                        </footer>
                    </tr>
                </tbody>
            </table>
        </p>

        <script>

            // ã€Œã„ã„ã­1ã€ãƒœã‚¿ãƒ³ã®elementã‚’å–å¾—
            document.getElementById("like-button1-{{ zatudan_log_data['id'] }}").
                addEventListener("click", ev => {
    
                    // ã€Œã„ã„ã­ã€ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–
                    document.getElementById("like-button1-{{ zatudan_log_data['id'] }}").disabled = true;
    
                    // ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã«ã€Œã„ã„ã­ã€ã®ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒƒãƒ—ã‚’ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
                    fetch("zatulike1", {
                        method: "POST",
                        headers: { "Content-Type": "application/json; charset=utf-8" },
                        body: JSON.stringify({ "id": "{{ zatudan_log_data['id'] }}" })
                    })
                        .then(response => {
                            // ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒƒãƒ—å¾Œã®ã€Œã„ã„ã­ã€ã‚’å–å¾—
                            return response.json();
                        })
                        .then(data => {
                            // ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒƒãƒ—å¾Œã®ã€Œã„ã„ã­ã€ã‚’ã€Œã„ã„ã­ã€ãƒœã‚¿ãƒ³ã«åæ˜ 
                            document.getElementById("like-button1-{{ zatudan_log_data['id'] }}").innerHTML = 'ğŸ˜†' + data["result"];
                        }).finally(() => {
                            console.log("request complete!");
                        });
                });

                // ã€Œã„ã„ã­2ã€ãƒœã‚¿ãƒ³ã®elementã‚’å–å¾—
            document.getElementById("like-button2-{{ zatudan_log_data['id'] }}").
                addEventListener("click", ev => {
    
                    // ã€Œã„ã„ã­ã€ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–
                    document.getElementById("like-button2-{{ zatudan_log_data['id'] }}").disabled = true;
    
                    // ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã«ã€Œã„ã„ã­ã€ã®ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒƒãƒ—ã‚’ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
                    fetch("zatulike2", {
                        method: "POST",
                        headers: { "Content-Type": "application/json; charset=utf-8" },
                        body: JSON.stringify({ "id": "{{ zatudan_log_data['id'] }}" })
                    })
                        .then(response => {
                            // ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒƒãƒ—å¾Œã®ã€Œã„ã„ã­ã€ã‚’å–å¾—
                            return response.json();
                        })
                        .then(data => {
                            // ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒƒãƒ—å¾Œã®ã€Œã„ã„ã­ã€ã‚’ã€Œã„ã„ã­ã€ãƒœã‚¿ãƒ³ã«åæ˜ 
                            document.getElementById("like-button2-{{ zatudan_log_data['id'] }}").innerHTML = 'ğŸ˜' + data["result"];
                        }).finally(() => {
                            console.log("request complete!");
                        });
                });

                 // ã€Œã„ã„ã­3ã€ãƒœã‚¿ãƒ³ã®elementã‚’å–å¾—
            document.getElementById("like-button3-{{ zatudan_log_data['id'] }}").
                addEventListener("click", ev => {
    
                    // ã€Œã„ã„ã­ã€ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–
                    document.getElementById("like-button3-{{ zatudan_log_data['id'] }}").disabled = true;
    
                    // ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã«ã€Œã„ã„ã­ã€ã®ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒƒãƒ—ã‚’ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
                    fetch("zatulike3", {
                        method: "POST",
                        headers: { "Content-Type": "application/json; charset=utf-8" },
                        body: JSON.stringify({ "id": "{{ zatudan_log_data['id'] }}" })
                    })
                        .then(response => {
                            // ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒƒãƒ—å¾Œã®ã€Œã„ã„ã­ã€ã‚’å–å¾—
                            return response.json();
                        })
                        .then(data => {
                            // ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒƒãƒ—å¾Œã®ã€Œã„ã„ã­ã€ã‚’ã€Œã„ã„ã­ã€ãƒœã‚¿ãƒ³ã«åæ˜ 
                            document.getElementById("like-button3-{{ zatudan_log_data['id'] }}").innerHTML = 'ğŸ˜­' + data["result"];
                        }).finally(() => {
                            console.log("request complete!");
                        });
                });

                 // ã€Œã„ã„ã­4ã€ãƒœã‚¿ãƒ³ã®elementã‚’å–å¾—
            document.getElementById("like-button4-{{ zatudan_log_data['id'] }}").
                addEventListener("click", ev => {
    
                    // ã€Œã„ã„ã­ã€ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–
                    document.getElementById("like-button4-{{ zatudan_log_data['id'] }}").disabled = true;
    
                    // ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã«ã€Œã„ã„ã­ã€ã®ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒƒãƒ—ã‚’ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
                    fetch("zatulike4", {
                        method: "POST",
                        headers: { "Content-Type": "application/json; charset=utf-8" },
                        body: JSON.stringify({ "id": "{{ zatudan_log_data['id'] }}" })
                    })
                        .then(response => {
                            // ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒƒãƒ—å¾Œã®ã€Œã„ã„ã­ã€ã‚’å–å¾—
                            return response.json();
                        })
                        .then(data => {
                            // ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒƒãƒ—å¾Œã®ã€Œã„ã„ã­ã€ã‚’ã€Œã„ã„ã­ã€ãƒœã‚¿ãƒ³ã«åæ˜ 
                            document.getElementById("like-button4-{{ zatudan_log_data['id'] }}").innerHTML = 'ğŸ˜¯' + data["result"];
                        }).finally(() => {
                            console.log("request complete!");
                        });
                });

        </script>
    
        {% endfor %}
</div>
<footer class="db-footer">
    <a href="{{ url_for('zatudan') }}" class="ask-question-btn">é›‘è«‡ã™ã‚‹</a>
</footer>
<div style="height: 80px;"></div>


{% include 'footer.html' %}

</body>
</html>